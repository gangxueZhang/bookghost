# Linux命令集

## nc命令

nc是netcat的简写，有着网络界的瑞士军刀美誉。因为它短小精悍、功能实用，被设计为一个简单、可靠的网络工具

```shell
# nc的作用
1、实现任意TCP/UDP端口的侦听，nc可以作为server以TCP或UDP方式侦听指定端口
2、端口的扫描，nc可以作为client发起TCP或UDP连接
3、机器之间传输文件
4、机器之间网络测速   

# 语法
nc [-hlnruz][-g<网关...>][-G<指向器数目>][-i<延迟秒数>][-o<输出文件>][-p<通信端口>][-s<来源位址>][-v...][-w<超时秒数>][主机名称][通信端口...]

# 案例说明
# 扫描TCP端口: 扫描192.168.0.3 的端口 范围是 1-100
$ nc -v -z -w2 192.168.0.3 1-100 
# 扫描UDP端口: 扫描192.168.0.3 的端口 范围是 1-1000
$ nc -u -z -w2 192.168.0.3 1-1000 
# 扫描指定端口: 扫描 80端口
$ nc -nvv 192.168.0.1 80
# 监听9999端口
$ nc -lk 9999

# 参数选项
-g<网关> 设置路由器跃程通信网关，最多可设置8个。
-k 强制 nc在其当前连接完成后继续侦听另一个连接。只能和 -l选项一起使用。
-G<指向器数目> 设置来源路由指向器，其数值为4的倍数。
-h 在线帮助。
-i<延迟秒数> 设置时间间隔，以便传送信息及扫描通信端口。
-l 使用监听模式，管控传入的资料。
-n 直接使用IP地址，而不通过域名服务器。
-o<输出文件> 指定文件名称，把往来传输的数据以16进制字码倾倒成该文件保存。
-p<通信端口> 设置本地主机使用的通信端口。
-r 乱数指定本地与远端主机的通信端口。
-s<来源位址> 设置本地主机送出数据包的IP地址。
-u 使用UDP传输协议。
-v 显示指令执行过程。
-w<超时秒数> 设置等待连线的时间。
-z 使用0输入/输出模式，只在扫描通信端口时使用。
```

## df命令

`df`命令作用是列出文件系统的整体磁盘空间使用情况。可以用来查看磁盘已被使用多少空间和还剩余多少空间。
`df`命令显示系统中包含每个文件名参数的磁盘使用情况，如果没有文件名参数，则显示所有当前已挂载文件系统的磁盘空间使用情况，

```shell
# 语法
$ df [选项] [文件名]

# 使用案例
# 指定一个文件夹，查看该文件夹所在磁盘的使用情况
$ df /home
#指定一个文件
$ df /bin/ls   

# 参数选项
-a：--all，显示所有的文件系统，包括虚拟文件系统，参考示例2。
-B：--block-size，指定单位大小。比如1k，1m等，参考示例3。
-h：--human-readable，以人们易读的GB、MB、KB等格式显示，参考示例4。
-H：--si，和-h参数一样，但是不是以1024，而是1000，即1k=1000，而不是1k=1024。
-i：--inodes，不用硬盘容量，而是以inode的数量来显示，参考示例5。
-k：以KB的容量显示各文件系统，相当于--block-size=1k。
-m：以KB的容量显示各文件系统，相当于--block-size=1m。
-l：--local，只显示本地文件系统。
--no-sync：在统计使用信息之前不调用sync命令(默认)。
-sync：在统计使用信息之前调用sync命令。
-P：--portability，使用POSIX格式显示，参考示例6。
-t：--type=TYPE，只显示指定类型的文件系统，参考示例7。
-T：--print-type，显示文件系统类型，参考示例8。
-x：--exclude-type=TYPE，不显示指定类型的文件系统。
--help：显示帮助信息。
--version：显示版本信息。
```

## du命令

Linux du （英文全拼：disk usage）命令用于显示目录或文件的大小。du 会显示指定的目录或文件所占用的磁盘空间。

```shell
# 语法
$ du [-abcDhHklmsSx][-L <符号连接>][-X <文件>][--block-size][--exclude=<目录或文件>][--max-depth=<目录层数>][--help][--version][目录或文件]

# 使用案例
# 方便阅读的格式显示test目录所占空间情况：
$ du -h test

# 参数选项
-a或-all 显示目录中个别文件的大小。
-b或-bytes 显示目录或文件大小时，以byte为单位。
-c或--total 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。
-D或--dereference-args 显示指定符号连接的源文件大小。
-h或--human-readable 以K，M，G为单位，提高信息的可读性。
-H或--si 与-h参数相同，但是K，M，G是以1000为换算单位。
-k或--kilobytes 以1024 bytes为单位。
-l或--count-links 重复计算硬件连接的文件。
-L<符号连接>或--dereference<符号连接> 显示选项中所指定符号连接的源文件大小。
-m或--megabytes 以1MB为单位。
-s或--summarize 仅显示总计。
-S或--separate-dirs 显示个别目录的大小时，并不含其子目录的大小。
-x或--one-file-xystem 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。
-X<文件>或--exclude-from=<文件> 在<文件>指定目录或文件。
--exclude=<目录或文件> 略过指定的目录或文件。
--max-depth=<目录层数> 超过指定层数的目录后，予以忽略。
--help 显示帮助。
--version 显示版本信息。
```

## grep命令

    grep 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 **-**，则 grep 指令会从标准输入设备读取数据。

```shell
# 语法
$ grep [-abcEFGhHilLnqrsvVwxy][-A<显示行数>][-B<显示列数>][-C<显示列数>][-d<进行动作>][-e<范本样式>][-f<范本文件>][--help][范本样式][文件或目录...]

# 使用案例
# 在当前目录中，查找后缀有file字样的文件中包含test字符串的文件，并打印出该字符串的行
$ grep test *file 
# 以递归的方式查找符合条件的文件。查找目录/etc/acpi及其子目录下所有文件中包含字符串update的文件，并打印出该字符串所在行的内容
$ grep -r update /etc/acpi 
# 反向查找。前面各个例子是查找并打印出符合条件的行，通过"-v"参数可以打印出不符合条件行的内容。
$ grep -v test *test*

# 参数选项
-a 或 --text : 不要忽略二进制的数据。
-A<显示行数> 或 --after-context=<显示行数> : 除了显示符合范本样式的那一列之外，并显示该行之后的内容。
-b 或 --byte-offset : 在显示符合样式的那一行之前，标示出该行第一个字符的编号。
-B<显示行数> 或 --before-context=<显示行数> : 除了显示符合样式的那一行之外，并显示该行之前的内容。
-c 或 --count : 计算符合样式的列数。
-C<显示行数> 或 --context=<显示行数>或-<显示行数> : 除了显示符合样式的那一行之外，并显示该行之前后的内容。
-d <动作> 或 --directories=<动作> : 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。
-e<范本样式> 或 --regexp=<范本样式> : 指定字符串做为查找文件内容的样式。
-E 或 --extended-regexp : 将样式为延伸的正则表达式来使用。
-f<规则文件> 或 --file=<规则文件> : 指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式。
-F 或 --fixed-regexp : 将样式视为固定字符串的列表。
-G 或 --basic-regexp : 将样式视为普通的表示法来使用。
-h 或 --no-filename : 在显示符合样式的那一行之前，不标示该行所属的文件名称。
-H 或 --with-filename : 在显示符合样式的那一行之前，表示该行所属的文件名称。
-i 或 --ignore-case : 忽略字符大小写的差别。
-l 或 --file-with-matches : 列出文件内容符合指定的样式的文件名称。
-L 或 --files-without-match : 列出文件内容不符合指定的样式的文件名称。
-n 或 --line-number : 在显示符合样式的那一行之前，标示出该行的列数编号。
-o 或 --only-matching : 只显示匹配PATTERN 部分。
-q 或 --quiet或--silent : 不显示任何信息。
-r 或 --recursive : 此参数的效果和指定"-d recurse"参数相同。
-s 或 --no-messages : 不显示错误信息。
-v 或 --invert-match : 显示不包含匹配文本的所有行。
-V 或 --version : 显示版本信息。
-w 或 --word-regexp : 只显示全字符合的列。
-x --line-regexp : 只显示全列符合的列。
-y : 此参数的效果和指定"-i"参数相同。
```

## egrep命令

        egrep执行效果与"grep-E"相似，使用的语法及参数可参照grep指令，与grep的不同点在于解读字符串的方法。egrep是用extended regular expression语法来解读的，而grep则用basic regular expression语法解读，extended regular expression比basic regular expression的表达更规范。

```shell
# 语法
$ egrep [范本模式] [文件或目录] 

# 使用案例
显示文件中符合条件的字符。查找当前目录下所有文件中包含字符串"Linux"的文件
$ egrep Linux *

# 参数选项
参考grep参数
```

## fgrep命令

本指令相当于执行 grep 指令加上参数 **-F**，详见[grep命令](https://www.runoob.com/linux/linux-comm-grep.html)说明。Linux fgrep命令用于查找文件里符合条件的字符串。

```shell
# 语法
$ fgrep [范本样式][文件或目录...]

# 使用案例

# 参数选项
```

## rgrep命令(有的系统不一定有)

        rgrep指令的功能和grep指令类似，可查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设rgrep指令会把含有范本样式的那一列显示出来。

```shell
# 语法
$ rgrep [-?BcDFhHilnNrv][-R<范本样式>][-W<列长度>][-x<扩展名>][--help][--version][范本样式][文件或目录...]

# 使用案例
在当前目录下查找句子中包含"Hello"字符串的文件
$ rgrep Hello * 

# 参数选项
-? 显示范本样式与范例的说明。
-B 忽略二进制的数据。
-c 计算符合范本样式的列数。
-D 排错模式，只列出指令搜寻的目录清单，而不会读取文件内容。
-F 当遇到符号连接时，rgrep预设是忽略不予处理，加上本参数后，rgrep指令就会读取该连接所指向的原始文件的内容。
-h 特别将符合范本样式的字符串标示出来。
-H 只列出符合范本样式的字符串，而非显示整列的内容。
-i 忽略字符大小写的差别。
-l 列出文件内容符合指定的范本样式的文件名称。
-n 在显示符合坊本样式的那一列之前，标示出该列的列数编号。
-N 不要递归处理。
-r 递归处理，将指定目录下的所有文件及子目录一并处理。
-R<范本样式> 此参数的效果和指定"-r"参数类似，但只主力符合范本样式文件名称的文件。
-v 反转查找。
-W<列长度> 限制符合范本样式的字符串所在列，必须拥有的字符数。
-x<扩展名> 只处理符合指定扩展名的文件名称的文件。
--help 在线帮助。
--version 显示版本信息。
```

## find命令

        Linux find 命令用来在指定目录下查找文件。任何位于参数之前的字符串都将被视为欲查找的目录名。如果使用该命令时，不设置任何参数，则 find 命令将在当前目录下查找子目录与文件。并且将查找到的子目录和文件全部进行显示。

```shell
# 语法
find [-H | -L | -P] [-EXdsx] [-f path] path ... [expression]
find [-H | -L | -P] [-EXdsx] -f path [path ...] [expression]

# 使用案例
# *表示通配任意个字符 ？表示通配单个字符
find /home  -name "*.t?t"   
# 查找文件更新日时在距现在时刻4天以内的文件
find   /usr   -mtime  -4   
# 查找文件更新日时在距现在时刻5天以上的文件
find   /usr  -mtime  +4    
# 查找文件更新日时在距现在时刻4天以上5天以内的文件
find   /usr   -mtime   4   
# 查找一下/var/log目录下内容更改时间为40天前并且大于100K的文件，并列出他们的路径。
find /var/log   -mtime +40 -a -size +100k -exec ls -lh {} \;
# 查找一下/var/log目录下内容更改时间为30天前并且不属于root群组的文件，并提示是否删除他们。
find /var/log -type f -a  -mtime  +30 -not -group root -ok rm -rf {} \;
# 用grep命令在当前目录下的普通文件中搜索hostname这个词
find ./ -name -type f -print | xargs grep "hostnames"


# 参数选项
-amin<分钟>：查找在指定时间曾被存取过的文件或目录，单位以分钟计算；
-anewer<参考文件或目录>：查找其存取时间较指定文件或目录的存取时间更接近现在的文件或目录；
-atime<24小时数>：查找在指定时间曾被存取过的文件或目录，单位以24小时计算；
-cmin<分钟>：查找在指定时间之时被更改过的文件或目录；
-cnewer<参考文件或目录>查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；
-ctime<24小时数>：查找在指定时间之时被更改的文件或目录，单位以24小时计算；
-daystart：从本日开始计算时间；
-depth：从指定目录下最深层的子目录开始查找；
-expty：寻找文件大小为0 Byte的文件，或目录下没有任何子目录或文件的空目录；
-exec<执行指令>：假设find指令的回传值为True，就执行该指令；
-false：将find指令的回传值皆设为False；
-fls<列表文件>：此参数的效果和指定“-ls”参数类似，但会把结果保存为指定的列表文件；
-follow：排除符号连接；
-fprint<列表文件>：此参数的效果和指定“-print”参数类似，但会把结果保存成指定的列表文件；
-fprint0<列表文件>：此参数的效果和指定“-print0”参数类似，但会把结果保存成指定的列表文件；
-fprintf<列表文件><输出格式>：此参数的效果和指定“-printf”参数类似，但会把结果保存成指定的列表文件；
-fstype<文件系统类型>：只寻找该文件系统类型下的文件或目录；
-gid<群组识别码>：查找符合指定之群组识别码的文件或目录；
-group<群组名称>：查找符合指定之群组名称的文件或目录；
-help或——help：在线帮助；
-ilname<范本样式>：此参数的效果和指定“-lname”参数类似，但忽略字符大小写的差别；
-iname<范本样式>：此参数的效果和指定“-name”参数类似，但忽略字符大小写的差别；
-inum<inode编号>：查找符合指定的inode编号的文件或目录；
-ipath<范本样式>：此参数的效果和指定“-path”参数类似，但忽略字符大小写的差别；
-iregex<范本样式>：此参数的效果和指定“-regexe”参数类似，但忽略字符大小写的差别；
-links<连接数目>：查找符合指定的硬连接数目的文件或目录；
-iname<范本样式>：指定字符串作为寻找符号连接的范本样式；
-ls：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出；
-maxdepth<目录层级>：设置最大目录层级；
-mindepth<目录层级>：设置最小目录层级；
-mmin<分钟>：查找在指定时间曾被更改过的文件或目录，单位以分钟计算；
-mount：此参数的效果和指定“-xdev”相同；
-mtime<24小时数>：查找在指定时间曾被更改过的文件或目录，单位以24小时计算；
-name<范本样式>：指定字符串作为寻找文件或目录的范本样式；
-newer<参考文件或目录>：查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；
-nogroup：找出不属于本地主机群组识别码的文件或目录；
-noleaf：不去考虑目录至少需拥有两个硬连接存在；
-nouser：找出不属于本地主机用户识别码的文件或目录；
-ok<执行指令>：此参数的效果和指定“-exec”类似，但在执行指令之前会先询问用户，若回答“y”或“Y”，则放弃执行命令；
-path<范本样式>：指定字符串作为寻找目录的范本样式；
-perm<权限数值>：查找符合指定的权限数值的文件或目录；
-print：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为每列一个名称，每个名称前皆有“./”字符串；
-print0：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为全部的名称皆在同一行；
-printf<输出格式>：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式可以自行指定；
-prune：不寻找字符串作为寻找文件或目录的范本样式;
-regex<范本样式>：指定字符串作为寻找文件或目录的范本样式；
-size<文件大小>：查找符合指定的文件大小的文件；
-true：将find指令的回传值皆设为True；
-typ<文件类型>：只寻找符合指定的文件类型的文件；
-uid<用户识别码>：查找符合指定的用户识别码的文件或目录；
-used<日数>：查找文件或目录被更改之后在指定时间曾被存取过的文件或目录，单位以日计算；
-user<拥有者名称>：查找符和指定的拥有者名称的文件或目录；
-version或——version：显示版本信息；
-xdev：将范围局限在先行的文件系统中；
-xtype<文件类型>：此参数的效果和指定“-type”参数类似，差别在于它针对符号连接检查。
```







# 附录A

## 参考文档地址

[Linux命令大全](https://www.runoob.com/linux/linux-command-manual.html)















